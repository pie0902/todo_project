{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AllArticles(){const[articles,setArticles]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[currentPage,setCurrentPage]=useState(1);const[articlesPerPage]=useState(10);// 한 페이지당 게시글 수\nconst navigate=useNavigate();useEffect(()=>{fetchArticles();},[]);const fetchArticles=async()=>{setLoading(true);try{const token=localStorage.getItem('token');if(!token){throw new Error('Authentication token not found');}const response=await fetch('/api/articles',{headers:{'Authorization':\"Bearer \".concat(token)}});if(!response.ok){throw new Error('Something went wrong');}const data=await response.json();setArticles(data);}catch(error){setError(error.message);}finally{setLoading(false);}};const indexOfLastArticle=currentPage*articlesPerPage;const indexOfFirstArticle=indexOfLastArticle-articlesPerPage;const currentArticles=articles.slice(indexOfFirstArticle,indexOfLastArticle);const handleArticleClick=articleId=>{navigate(\"/board/articles/\".concat(articleId));};const paginate=pageNumber=>setCurrentPage(pageNumber);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uAC8C\\uC2DC\\uAE00\"}),currentArticles.map(article=>/*#__PURE__*/_jsxs(\"div\",{className:\"article-card\",onClick:()=>handleArticleClick(article.id),children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\uC791\\uC131\\uC790: \",article.username]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uC81C\\uBAA9: \",article.title]})]},article.id)),/*#__PURE__*/_jsx(\"div\",{className:\"pagination\",children:[...Array(Math.ceil(articles.length/articlesPerPage)).keys()].map(number=>/*#__PURE__*/_jsx(\"button\",{className:\"page-btn\",onClick:()=>paginate(number+1),children:number+1},number+1))})]});}export default AllArticles;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","AllArticles","articles","setArticles","loading","setLoading","error","setError","currentPage","setCurrentPage","articlesPerPage","navigate","fetchArticles","token","localStorage","getItem","Error","response","fetch","headers","concat","ok","data","json","message","indexOfLastArticle","indexOfFirstArticle","currentArticles","slice","handleArticleClick","articleId","paginate","pageNumber","children","map","article","className","onClick","id","username","title","Array","Math","ceil","length","keys","number"],"sources":["/Users/jongilyun/Desktop/Spring/todo_veiw/src/components/allArticle.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nfunction AllArticles() {\n  const [articles, setArticles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [articlesPerPage] = useState(10); // 한 페이지당 게시글 수\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetchArticles();\n  }, []);\n\n  const fetchArticles = async () => {\n    setLoading(true);\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('Authentication token not found');\n      }\n\n      const response = await fetch('/api/articles', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Something went wrong');\n      }\n\n      const data = await response.json();\n      setArticles(data);\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const indexOfLastArticle = currentPage * articlesPerPage;\n  const indexOfFirstArticle = indexOfLastArticle - articlesPerPage;\n  const currentArticles = articles.slice(indexOfFirstArticle, indexOfLastArticle);\n\n  const handleArticleClick = (articleId) => {\n    navigate(`/board/articles/${articleId}`);\n  };\n\n  const paginate = (pageNumber) => setCurrentPage(pageNumber);\n\n  return (\n      <div>\n        <h2>게시글</h2>\n        {currentArticles.map(article => (\n            <div className=\"article-card\" key={article.id} onClick={() => handleArticleClick(article.id)}>\n              <h4>작성자: {article.username}</h4>\n              <h3>제목: {article.title}</h3>\n              {/*<p>내용: {article.content}</p>*/}\n            </div>\n        ))}\n        <div className=\"pagination\">\n          {[...Array(Math.ceil(articles.length / articlesPerPage)).keys()].map(number => (\n              <button className=\"page-btn\" key={number + 1} onClick={() => paginate(number + 1)}>\n                {number + 1}\n              </button>\n          ))}\n        </div>\n      </div>\n  );\n}\n\nexport default AllArticles;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}